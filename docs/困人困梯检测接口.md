# 困人困梯检测接口

[[_TOC_]]

## 需求说明

实现基于对话内容，判断是否出现“电梯困人事件”，并输出判断结果。
由工程高频调用算法接口，把每一轮对话ASR转写内容传给算法接口，算法仅实现判断是否出现“电梯困人事件”，算法仅返回一个标志给到工程端，要求算法响应尽量快和准（5秒内有结果）：

## 接口定义

`/hitachi_elevator/trapped_detect`

### 入参示例

```json
{
  "session_id": "call_20241224_001",
  "turn_id": 7,
  "role": "user",
  "text": "电梯突然停了，我被困在里面了，帮忙联系维修！"
}
```

- `session_id` (string): 通话唯一标识。
- `turn_id` (int): 当前轮次编号。
- `role` (string): `user` 或 `agent`。
- `text` (string): 当前轮次 ASR 转写文本。

### 出参示例

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "is_trapped": true,
    "event_type": "困人",
    "probability": 0.96,
    "evidence": "我被困在里面了"
  }
}
```

- `is_trapped` (bool): 是否判定为电梯困人/困梯事件。
- `event_type` (string): `困人` / `困梯` / `不确定`。
- `probability` (float): 置信度，用于工程侧阈值控制。
- `evidence` (string): 触发判断的关键短语。
