# 敏感词匹配相关接口

[[_TOC_]]

## 敏感词训练数据

添加、更新训练数据示例（`/hitachi_elevator/sensitive/train`）

入参示例：

```json
{
  "method": "update",
  "group_id": "敏感词组ID",
  "group_name": "敏感词组名称",
  "group_type": "1市民，2表示话务员",
  "data": ["投诉", "危害", "敏感词"]
  "regex": false
}
```

- regex (bool): 标识是否是正则表达式，如果为True，data字段中的数据可以是正则表达式。

出参示列：

```json
{
  "code": "200",
  "msg": "训练成功"
}
```

删除数据（`/hitachi_elevator/sensitive/delete`）
入参:

```json
{
  "group_id": ["group_id_1", "id"]
}
```

出参：

```json
{
  "code": "200",
  "msg": "删除成功"
}
```

## 敏感词匹配（`/hitachi_elevator/sensitive/match`）

```json
{
  "type": "1",
  "text": "涉事主体是广州市公安局，地点在广州市白云区，案件发生在广州市天河区",
  "semantic_score_threshold": 0.99,
  "semantic_group_threshold": 0.9,
  "use_rerank_filter_full_match": true
}
```

- `semantic_score_threshold` (float, 可选，默认 `0.99`): 语义候选的最低得分。
- `semantic_group_threshold` (float, 可选，默认 `0.9`): 同组 rerank 得分下限。
- `use_rerank_filter_full_match` (bool, 可选，默认 `true`): 是否使用排序模型过滤完全匹配结果。

返回结果示例如下

```json
{
  "code": 200,
  "msg": "success",
  "data": [
      {
        "group_id": "id",
        "group_name": "举报",
        "probability": 0.99
        "matched_terms": ["投诉"]
      },
      {
        "group_id": "id",
        "group_name": "举报",
        "probability": 0.99
        "matched_terms": ["投诉"]
      },
      {...}
  ]
}
```
